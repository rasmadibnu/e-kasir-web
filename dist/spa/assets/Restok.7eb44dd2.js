import{c as v,a as g,h as S,N as y,_ as C,O as V,r as s,P as p,Q as h,X as Q,T as a,S as o,Y as B,$ as i,Z as r,V as n,R as x,W as m,U as $,B as N}from"./index.8a61695e.js";import{Q as b}from"./QInput.d7cd4427.js";import{Q as k}from"./QTd.55ae123c.js";import{Q as q,h as D,a as A}from"./moment.ef2cf31d.js";import{Q as P,a as w}from"./QCard.b11d0a6e.js";import{Q as U,C as R}from"./ClosePopup.651837a9.js";import{j as Y}from"./QDialog.a3d2e9f2.js";import{_ as z}from"./VxIcon.632b9159.js";import"./use-key-composition.b096f1b1.js";const I=["top","middle","bottom"];var T=v({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>I.includes(e)}},setup(e,{slots:t}){const c=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),f=g(()=>{const d=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(d!==void 0?` text-${d}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>S("div",{class:f.value,style:c.value,role:"status","aria-label":e.label},y(t.default,e.label!==void 0?[e.label]:[]))}});const M=[{name:"Name",label:"Nama",align:"left",field:"name",sortable:!0},{name:"Kategori",label:"Kategori",align:"left",field:e=>{var t;return(t=e.kategori)==null?void 0:t.name},sortable:!0},{name:"Harga",label:"Harga",align:"left",field:"harga_rp",sortable:!0},{name:"Stok",label:"Stok",align:"left",field:e=>{var t;return(t=e.stok)==null?void 0:t.stok},sortable:!0},{name:"Supplier",label:"Supplier",align:"left",field:e=>{var t;return(t=e.supplier)==null?void 0:t.name},sortable:!0},{name:"Created",label:"Created By",align:"left",field:e=>{var t;return(t=e.user_create)==null?void 0:t.name},sortable:!0},{name:"Updated",label:"Updated At",align:"left",field:e=>D(e.updated_at).format("YYYY-MM-DD hh:mm:ss"),sortable:!0},{name:"action",label:"Action",align:"right"}],L=V({props:["user"],components:{VxIcon:z},setup(){return{columns:M,rows:s([]),loading:s(!1),confirm:s(!1),selected:s([]),search:s(""),new_stok:s()}},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.$api.get("/produk").then(e=>{this.rows=e.data.data,this.loading=!1}).catch(e=>{console.log(e)})},submit(){this.loading=!0;var e=[];this.selected.map(t=>{e.push({produk_id:t.id,stok:t.stok.stok+this.new_stok,value:this.new_stok,type:"Re-Stok",created_by:this.user.id})}),this.$api.post("/stoks",e).then(t=>{this.$q.notify({message:"Stok successfully updated",color:"positive"}),this.confirm=!1,this.new_stok=s(),this.getData()}).catch(t=>{console.log(t)})},checkSelected(){this.selected.length>0?this.confirm=!0:this.$q.notify({message:"Silahkan pilih produk terlebih dahulu",color:"negative"})}}}),j=i("div",{class:"tw-text-xl tw-font-semibold"},"Re-Stok",-1),E={class:"tw-flex tw-space-x-4"},H={class:"tw-flex tw-items-center"},K={class:"text-h6 tw-flex tw-items-center"},F={class:"tw-mb-3"};function O(e,t,c,f,d,W){const u=p("vx-icon"),_=p("VxIcon");return h(),Q(B,null,[a(q,{class:"tw-p-4 tw-space-y-6"},{default:o(()=>[j,a(A,{color:"primary",columns:e.columns,rows:e.rows,loading:e.loading,filter:e.search,title:"List Produk",pagination:{rowsPerPage:10},selected:e.selected,"onUpdate:selected":t[2]||(t[2]=l=>e.selected=l),selection:"multiple","row-key":"id",flat:""},{"top-right":o(()=>[i("div",E,[a(r,{"no-caps":"",outline:"",color:"primary",onClick:t[0]||(t[0]=l=>e.checkSelected())},{default:o(()=>[a(u,{iconName:"BoxAdd",class:"tw-mr-2",size:18}),n(" Re-Stok "),this.selected.length?(h(),x(T,{key:0,color:"red",floating:""},{default:o(()=>[n(m(this.selected.length),1)]),_:1})):$("",!0)]),_:1}),a(b,{dense:"",placeholder:"Search...",modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=l=>e.search=l),filled:""},{prepend:o(()=>[a(u,{iconName:"SearchStatus",size:20})]),_:1},8,["modelValue"])])]),"body-cell-index":o(l=>[a(k,{props:l},{default:o(()=>[n(m(l.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":o(l=>[a(k,{props:l},{default:o(()=>[a(r,{to:{name:"ProdukDetail",params:{id:l.row.id,from:"Stok"}},outline:"",size:"sm",class:"tw-flex",color:"primary","no-caps":""},{default:o(()=>[i("div",H,[a(u,{iconName:"Eye",class:"tw-mr-2",size:18}),n(" View ")])]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","filter","selected"])]),_:1}),a(Y,{modelValue:e.confirm,"onUpdate:modelValue":t[4]||(t[4]=l=>e.confirm=l)},{default:o(()=>[a(P,{style:{width:"400px"}},{default:o(()=>[a(w,null,{default:o(()=>[i("div",K,[a(_,{iconName:"BoxAdd",class:"tw-mr-2",size:22}),n(" Re-Stok ")])]),_:1}),a(w,{class:"q-py-none"},{default:o(()=>[i("div",F,[n(" Anda yakin ingin mengupdate stok "),i("b",null,m(this.selected.map(l=>l.name).join(", ")),1),n("? ")]),a(b,{filled:"",rules:[l=>!!l||"This field required"],label:"Stok",modelValue:e.new_stok,"onUpdate:modelValue":t[3]||(t[3]=l=>e.new_stok=l),modelModifiers:{number:!0}},null,8,["rules","modelValue"])]),_:1}),a(U,{align:"right"},{default:o(()=>[N(a(r,{flat:"",label:"Cancel","no-caps":""},null,512),[[R]]),a(r,{flat:"",label:"Yes",color:"primary","no-caps":"",onClick:e.submit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var se=C(L,[["render",O]]);export{se as default};
