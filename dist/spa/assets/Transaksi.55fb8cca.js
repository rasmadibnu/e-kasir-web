import{Q as h}from"./QInput.0d92f8bb.js";import{h as _,Q as b,a as o,b as c}from"./moment.d48c2d66.js";import{c as w,a as g,h as k,e as x,_ as v,O as D,r as d,P as T,Q as P,R as y,S as a,T as t,$ as u,V as r,W as s,Z as Q,B,ap as C}from"./index.a450bba7.js";import{_ as N}from"./VxIcon.c7b7c2a9.js";import"./QDialog.bc836854.js";var f=w({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:i}){const m=g(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>k("tr",{class:m.value},x(i.default))}});const S=[{name:"index",label:"#",align:"center"},{name:"No Transaksi",label:"No Transaksi",align:"left",field:"no_transaksi",sortable:!0},{name:"Kasir",label:"Kasir",align:"left",field:e=>{var i;return(i=e.user_create)==null?void 0:i.name},sortable:!0},{name:"Diskon",label:"Diskon",align:"left",field:"diskon",format:e=>e+"%",sortable:!0},{name:"PPN",label:"PPN",align:"left",field:"ppn",format:e=>e+"%",sortable:!0},{name:"TotalBelanja",label:"Total Belanja",align:"left",field:"total_belanja_rp",sortable:!0},{name:"Created",label:"Created At",align:"left",field:e=>_(e.created_at).format("YYYY-MM-DD hh:mm:ss"),sortable:!0},{name:"action",label:"Action",align:"center"}],j=D({props:["user"],components:{VxIcon:N},setup(){return{moment:_,columns:S,rows:d([]),loading:d(!1),search:d("")}},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.$api.get("/transaksi").then(e=>{this.rows=e.data.data,this.loading=!1}).catch(e=>{console.log(e)})},rupiah(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}}}),V=u("div",{class:"tw-text-xl tw-font-semibold"},"Transaksi",-1),Y={class:"tw-flex tw-justify-between tw-w-full"},$={class:"text-left"};function I(e,i,m,M,q,z){const p=T("vx-icon");return P(),y(b,{class:"tw-p-4 tw-space-y-6"},{default:a(()=>[V,t(c,{color:"primary",columns:e.columns,rows:e.rows,loading:e.loading,filter:e.search,pagination:{rowsPerPage:10},flat:""},{top:a(()=>[u("div",Y,[t(h,{dense:"",placeholder:"Search...",modelValue:e.search,"onUpdate:modelValue":i[0]||(i[0]=l=>e.search=l),filled:""},{prepend:a(()=>[t(p,{iconName:"SearchStatus",size:20})]),_:1},8,["modelValue"])])]),body:a(l=>[t(f,{props:l},{default:a(()=>[t(o,null,{default:a(()=>[r(s(l.rowIndex+1),1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(l.row.no_transaksi),1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(l.row.user_create.name),1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(l.row.diskon)+"% ",1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(l.row.ppn)+"% ",1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(l.row.total_belanja_rp),1)]),_:2},1024),t(o,null,{default:a(()=>[r(s(e.moment(l.row.created_at).format("YYYY-MM-DD hh:mm:ss")),1)]),_:2},1024),t(o,{class:"text-center"},{default:a(()=>[t(Q,{size:"sm",outline:"",color:"primary",round:"",onClick:n=>l.expand=!l.expand,icon:l.expand?"expand_less":"expand_more"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1032,["props"]),B(t(f,{props:l},{default:a(()=>[t(o,{colspan:"100%"},{default:a(()=>[u("div",$,[t(c,{flat:"",dense:"",bordered:"",rows:l.row.detail,columns:[{name:"index",label:"#",align:"center"},{name:"Produk",label:"Produk",align:"left",field:n=>n.produk.name,sortable:!0},{name:"Produk",label:"Jumlah Beli",align:"left",field:"jumlah_beli",sortable:!0},{name:"Subtotal",label:"Subtotal",align:"left",field:n=>this.rupiah(n.produk.harga*n.jumlah_beli),sortable:!0}]},{"body-cell-index":a(n=>[t(o,{props:n},{default:a(()=>[r(s(n.rowIndex+1),1)]),_:2},1032,["props"])]),_:2},1032,["rows","columns"])])]),_:2},1024)]),_:2},1032,["props"]),[[C,l.expand]])]),_:1},8,["columns","rows","loading","filter"])]),_:1})}var F=v(j,[["render",I]]);export{F as default};
