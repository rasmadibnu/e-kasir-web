import{_ as N,O as S,r as o,P as b,Q as d,X as z,T as a,S as l,Y as I,$ as c,Z as i,V as r,W as w,D as m,R as p,ap as U,aq as _}from"./index.6a46384e.js";import{Q as g,a as q}from"./QForm.fef47790.js";import{Q as B,h as K,a as P,b as k,c as T}from"./moment.7856589a.js";import{j as C,k as Y,l as A,Q as u,i as D,m as M,n as y,C as v}from"./ClosePopup.ceb416f6.js";import{_ as E,Q as V,b as f}from"./VxIcon.9b935379.js";const j=[{name:"index",label:"#",align:"center"},{name:"Name",label:"Nama",align:"left",field:"name",sortable:!0},{name:"Deskripsi",label:"Deskripsi",align:"left",field:"deskripsi",sortable:!0},{name:"Created",label:"Created By",align:"left",field:e=>{var s;return(s=e.user_create)==null?void 0:s.name},sortable:!0},{name:"Updated",label:"Updated At",align:"left",field:e=>K(e.updated_at).format("YYYY-MM-DD hh:mm:ss"),sortable:!0},{name:"action",label:"Action",align:"right"}],h={name:null,deskripsi:null},x=S({props:["user"],components:{VxIcon:E},setup(){return{columns:j,rows:o([]),loading:o(!1),search:o(""),is_edit:o(!1),confirm:o(!1),form_dialog:o(!1),id:o(""),form:o(structuredClone(h))}},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.$api.get("/kategori").then(e=>{this.rows=e.data.data,this.loading=!1}).catch(e=>{console.log(e)})},openDialog(e){e?(this.is_edit=!0,this.id=e.id,this.form={...e}):(this.form={...h},this.is_edit=!1),this.form_dialog=!0},closeDialog(){this.form={...h},this.form_dialog=!1,this.loading=!1},submit(){this.loading=!0,this.is_edit?this.$api.put("/kategori/"+this.id,{...this.form,updated_by:this.user.id}).then(e=>{this.$q.notify({message:"Kategori successfully updated",color:"positive"}),this.closeDialog(),this.getData()}).catch(e=>{this.closeDialog(),console.log(e)}):this.$api.post("/kategori",{...this.form,created_by:this.user.id}).then(e=>{this.$q.notify({message:"Kategori successfully created",color:"positive"}),this.closeDialog(),this.getData()}).catch(e=>{this.closeDialog(),console.log(e)})},confirmDelete(e){this.id=e,this.confirm=!0},deleteData(){this.$api.delete("/kategori/"+this.id).then(e=>{this.$q.notify({message:"Kategori successfully deleted",color:"positive"}),this.getData(),this.confirm=!1}).catch(e=>{console.log(e),this.confirm=!1})}}}),F=c("div",{class:"tw-text-xl tw-font-semibold"},"Kategori Produk",-1),R={class:"tw-flex tw-justify-between tw-w-full"},W={class:"text-h6"},L={class:"text-h6 text-negative tw-flex tw-items-center"};function O(e,s,X,Z,G,H){const n=b("vx-icon"),Q=b("VxIcon");return d(),z(I,null,[a(B,{class:"tw-p-4 tw-space-y-6"},{default:l(()=>[F,a(P,{color:"primary",columns:e.columns,rows:e.rows,loading:e.loading,filter:e.search,pagination:{rowsPerPage:10},flat:""},{top:l(()=>[c("div",R,[a(i,{outline:"","no-caps":"",color:"primary",onClick:s[0]||(s[0]=t=>e.openDialog(null))},{default:l(()=>[a(n,{iconName:"AddCircle",class:"tw-mr-2",size:20}),r(" Create New ")]),_:1}),a(g,{dense:"",placeholder:"Search...",modelValue:e.search,"onUpdate:modelValue":s[1]||(s[1]=t=>e.search=t),filled:""},{prepend:l(()=>[a(n,{iconName:"SearchStatus",size:20})]),_:1},8,["modelValue"])])]),"body-cell-index":l(t=>[a(k,{props:t},{default:l(()=>[r(w(t.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":l(t=>[a(k,{props:t},{default:l(()=>[a(i,{flat:"",dense:"",size:"sm",color:"primary"},{default:l(()=>[a(n,{iconName:"More",size:18}),a(Y,{"auto-close":"",class:"tw-shadow-none tw-border"},{default:l(()=>[a(A,{style:{"min-width":"100px"}},{default:l(()=>[m((d(),p(D,{clickable:"",class:"text-primary",onClick:$=>e.openDialog(t.row)},{default:l(()=>[a(u,{avatar:""},{default:l(()=>[a(n,{iconName:"Edit",size:20})]),_:1}),a(u,null,{default:l(()=>[r("Edit")]),_:1})]),_:2},1032,["onClick"])),[[_]]),a(M),m((d(),p(D,{clickable:"",class:"text-negative",onClick:$=>e.confirmDelete(t.row.id)},{default:l(()=>[a(u,{avatar:""},{default:l(()=>[a(n,{iconName:"Trash",size:20})]),_:1}),a(u,null,{default:l(()=>[r("Delete")]),_:1})]),_:2},1032,["onClick"])),[[_]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["columns","rows","loading","filter"])]),_:1}),a(C,{modelValue:e.form_dialog,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form_dialog=t)},{default:l(()=>[a(V,{style:{"min-width":"400px"}},{default:l(()=>[a(f,{class:"row items-center"},{default:l(()=>[c("div",W,w(e.is_edit?"Edit":"Create")+" Kategori",1),a(T),m((d(),p(i,{flat:"",round:"",dense:""},{default:l(()=>[a(n,{iconName:"CloseCircle",size:20})]),_:1})),[[v]])]),_:1}),a(q,{onSubmit:U(e.submit,["prevent"])},{default:l(()=>[a(f,{class:"tw-space-y-2"},{default:l(()=>[a(g,{modelValue:e.form.name,"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.name=t),filled:"",label:"Nama",rules:[t=>!!t||"This field is required"]},null,8,["modelValue","rules"]),a(g,{modelValue:e.form.deskripsi,"onUpdate:modelValue":s[3]||(s[3]=t=>e.form.deskripsi=t),filled:"",label:"Deskripsi"},null,8,["modelValue"])]),_:1}),a(y,{align:"right"},{default:l(()=>[a(i,{label:"Cancel","no-caps":"",flat:"",onClick:e.closeDialog,color:"negative"},null,8,["onClick"]),a(i,{label:"Submit",loading:e.loading,type:"submit","no-caps":"",flat:"",color:"primary"},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(C,{modelValue:e.confirm,"onUpdate:modelValue":s[5]||(s[5]=t=>e.confirm=t)},{default:l(()=>[a(V,null,{default:l(()=>[a(f,null,{default:l(()=>[c("div",L,[a(Q,{iconName:"Warning2",class:"tw-mr-2",size:22}),r(" Confirmation ")])]),_:1}),a(f,{class:"q-pt-none"},{default:l(()=>[r(" Are you sure want to delete this data? ")]),_:1}),a(y,{align:"right"},{default:l(()=>[m(a(i,{flat:"",label:"Cancel","no-caps":""},null,512),[[v]]),a(i,{flat:"",label:"Yes",color:"negative","no-caps":"",onClick:e.deleteData},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var se=N(x,[["render",O]]);export{se as default};
