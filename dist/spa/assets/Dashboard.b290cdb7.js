import{_ as k,O as v,r as n,P as w,Q as P,R as y,S as e,$ as l,T as a,an as g,W as f,V as T}from"./index.1269dd09.js";import{a as c,Q as m}from"./QCard.e3f529fd.js";import{V,Q as S,a as b,b as Q,c as _}from"./vue3-apexcharts.common.9a138ecd.js";import{m as A}from"./QDialog.807becb1.js";import{h as D,Q as N,a as x}from"./moment.25a5e129.js";import{_ as C}from"./VxIcon.aa3f9ac6.js";import"./use-key-composition.501918c1.js";import"./touch.bd17aad0.js";const $=v({components:{VueApexCharts:V,VsxIcon:C},setup(){const t=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(i);return{rupiah:t,series:n([{name:"Transaksi",data:[]}]),seriesUang:n([{name:"Pendapatan",data:[]}]),chartOptions:n({chart:{type:"area",height:350},dataLabels:{enabled:!1},colors:["#1976D2"],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{labels:{formatter:i=>i.toFixed(0)}},legend:{horizontalAlign:"left"}}),chartOptionsUang:n({chart:{type:"area",height:350},dataLabels:{enabled:!1},colors:["#00E396"],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{labels:{formatter:i=>t(i.toFixed(0))}},legend:{horizontalAlign:"left"}}),tab:n("transaksi"),count:n({kasir:0,produk:0,supplier:0}),stok:n(0),kasirProductive:n([]),bestSelling:n([])}},mounted(){this.getTransaksi(),this.getData(),this.getProduk()},methods:{getTransaksi(){this.$api.get("/transaksi").then(t=>{var i=this.chartOptions.xaxis.categories.map(s=>({month:s,count:0,sum:0}));t.data.data.forEach(s=>{s.detail.forEach(o=>{var u=this.bestSelling.find(r=>r.id==o.produk_id);u?(u.count+=o.jumlah_beli,u.sum+=o.harga*o.jumlah_beli):this.bestSelling.push({id:o.produk_id,name:o.produk.name,count:o.jumlah_beli,sum:o.harga*o.jumlah_beli})});var d=this.kasirProductive.find(o=>o.id==s.kasir_id);d?(d.transaksi+=1,d.uang+=s.total_belanja):this.kasirProductive.push({id:s.kasir_id,name:s.user_create.name,transaksi:1,uang:s.total_belanja});var h=D(s.tanggal).format("MMM"),p=i.find(o=>o.month==h);p.count+=1,p.sum+=s.total_belanja}),this.kasirProductive=this.kasirProductive.sort((s,d)=>s.transaksi-d.transaksi),this.bestSelling=this.bestSelling.sort((s,d)=>s.count-d.count),this.series[0].data=i.map(s=>s.count),this.seriesUang[0].data=i.map(s=>s.sum)}).catch(t=>{console.log(t)})},getData(){this.$api.get("/dashboard").then(t=>{this.count=t.data.data}).catch(t=>{console.log(t)})},getProduk(){this.$api.get("/produk").then(t=>{t.data.data.forEach(i=>{this.stok+=i.stok.stok})}).catch(t=>{console.log(t)})}}}),j=l("div",{class:"tw-text-xl tw-mb-4 tw-font-semibold"},"Dashboard",-1),B={class:"tw-container tw-mx-auto tw-grid"},O={class:"tw-grid tw-gap-4 tw-mb-4 md:tw-grid-cols-2 xl:tw-grid-cols-4"},U=l("p",{class:"tw-text-sm tw-font-medium tw-text-gray-600"},"Kasir",-1),J={class:"tw-text-lg tw-font-semibold tw-text-gray-700"},M=l("p",{class:"tw-text-sm tw-font-medium tw-text-gray-600"},"Produk",-1),z={class:"tw-text-lg tw-font-semibold tw-text-gray-700"},I=l("p",{class:"tw-text-sm tw-font-medium tw-text-gray-600"},"Supplier",-1),F={class:"tw-text-lg tw-font-semibold tw-text-gray-700"},E=l("p",{class:"tw-text-sm tw-font-medium tw-text-gray-600"},"Stok",-1),K={class:"tw-text-lg tw-font-semibold tw-text-gray-700"},L=l("div",{class:"text-center tw-text-2xl tw-mt-4"},"Best Selling",-1),R={class:"tw-grid tw-grid-cols-2 tw-mt-4 tw-gap-4"};function q(t,i,s,d,h,p){const o=w("VsxIcon"),u=w("VueApexCharts");return P(),y(N,{class:"tw-p-4 tw-pb-20"},{default:e(()=>[j,l("div",B,[l("div",O,[a(m,{flat:"",class:"tw-rounded-lg"},{default:e(()=>[a(c,{class:"tw-flex tw-items-center tw-space-x-4"},{default:e(()=>[a(g,{color:"primary","text-color":"white"},{default:e(()=>[a(o,{iconName:"Profile2User",size:22})]),_:1}),l("div",null,[U,l("p",J,f(t.count.kasir),1)])]),_:1})]),_:1}),a(m,{flat:"",class:"tw-rounded-lg"},{default:e(()=>[a(c,{class:"tw-flex tw-items-center tw-space-x-4"},{default:e(()=>[a(g,{color:"secondary","text-color":"white"},{default:e(()=>[a(o,{iconName:"Box",size:22})]),_:1}),l("div",null,[M,l("p",z,f(t.count.produk),1)])]),_:1})]),_:1}),a(m,{flat:"",class:"tw-rounded-lg"},{default:e(()=>[a(c,{class:"tw-flex tw-items-center tw-space-x-4"},{default:e(()=>[a(g,{color:"accent","text-color":"white"},{default:e(()=>[a(o,{iconName:"Building",size:22})]),_:1}),l("div",null,[I,l("p",F,f(t.count.supplier),1)])]),_:1})]),_:1}),a(m,{flat:"",class:"tw-rounded-lg"},{default:e(()=>[a(c,{class:"tw-flex tw-items-center tw-space-x-4"},{default:e(()=>[a(g,{color:"warning","text-color":"white"},{default:e(()=>[a(o,{iconName:"BoxTime",size:22})]),_:1}),l("div",null,[E,l("p",K,f(t.stok),1)])]),_:1})]),_:1})])]),a(m,{flat:""},{default:e(()=>[a(c,{class:"tw-text-lg"},{default:e(()=>[T(" Chart Bulanan ")]),_:1}),a(c,{class:"q-pt-none"},{default:e(()=>[a(S,{modelValue:t.tab,"onUpdate:modelValue":i[0]||(i[0]=r=>t.tab=r),"active-color":"primary","indicator-color":"primary",align:"left","no-caps":""},{default:e(()=>[a(b,{name:"transaksi",label:"Jumlah Transaksi"}),a(b,{name:"uang",label:"Pendapatan"})]),_:1},8,["modelValue"]),a(A),a(Q,{modelValue:t.tab,"onUpdate:modelValue":i[1]||(i[1]=r=>t.tab=r),animated:""},{default:e(()=>[a(_,{name:"transaksi"},{default:e(()=>[a(u,{type:"area",height:"250",options:t.chartOptions,series:t.series},null,8,["options","series"])]),_:1}),a(_,{name:"uang"},{default:e(()=>[a(u,{type:"area",height:"250",options:t.chartOptionsUang,series:t.seriesUang},null,8,["options","series"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),L,l("div",R,[a(x,{flat:"",title:"Kasir",pagination:{rowsPerPage:10},rows:t.kasirProductive,columns:[{name:"name",label:"Kasir",field:"name",align:"left",sortable:!0},{name:"transaksi",label:"Total Transaksi",field:"transaksi",align:"left",sortable:!0},{name:"uang",label:"Total Pendapatan",field:r=>t.rupiah(r.uang),align:"left",sortable:!0}]},null,8,["rows","columns"]),a(x,{flat:"",title:"Produk",pagination:{rowsPerPage:10},rows:t.bestSelling,columns:[{name:"name",label:"Produk",field:"name",align:"left",sortable:!0},{name:"transaksi",label:"Total Terjual",field:"count",align:"left",sortable:!0},{name:"uang",label:"Total Pendapatan",field:r=>t.rupiah(r.sum),align:"left",sortable:!0}]},null,8,["rows","columns"])])]),_:1})}var et=k($,[["render",q]]);export{et as default};
